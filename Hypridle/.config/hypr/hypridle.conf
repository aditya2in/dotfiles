# ~/.config/hypr/hypridle.conf

general {
    lock_cmd = pidof hyprlock || hyprlock # cmd to lock screen
    unlock_cmd = # cmd to run after unlocking
    before_sleep_cmd = loginctl lock-session # Lock before suspending (optional, but good practice)
    after_sleep_cmd = # cmd to run after waking up
    ignore_dbus_inhibit = false # whether to ignore dbus-sent inhibits
}

# 1. Primary Idle Timeout: Lock the screen after 3 minutes
listener {
    timeout = 180 # 3 minutes (180 seconds)
    on-timeout = loginctl lock-session; ${general.lock_cmd} # Formally lock the session AND visually lock the screen
    on-resume = notify-send "Welcome back!" # Only notify on resume here
}

# 2. Secondary Idle Timeout: Turn off monitors after an ADDITIONAL 1 minute of inactivity
# This timeout will trigger at 240 seconds (180 + 60) of total inactivity.
listener {
    timeout = 240 # 4 minutes (240 seconds = 180s lock + 60s additional for DPMS)
    on-timeout = hyprctl dispatch dpms off # Turn off displays
    on-resume = hyprctl dispatch dpms on # Turn on displays when activity resumes
}

# Optional: Idle handler for suspending the system (e.g., after 10 minutes total)
# listener {
#     timeout = 600 # 10 minutes (600 seconds)
#     on-timeout = systemctl suspend # Suspend the system
#     on-resume = # You might want to unlock or do something here after resume
# }
