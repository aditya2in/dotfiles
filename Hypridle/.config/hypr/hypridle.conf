general {
    lock_cmd = pidof hyprlock || hyprlock
}

# 1. Primary Idle Timeout: Lock the screen after 3 minutes
listener {
    timeout = 180 # 3 minutes
    on-timeout = loginctl lock-session # Formally lock the session
    on-timeout = hyprlock # Visually lock the screen with hyprlock
    # NOTE: The 'dpms off' command is REMOVED from here.
    on-resume = notify-send "Welcome back!" # Only notify on resume here
}

# 2. Secondary Idle Timeout: Turn off monitors after an ADDITIONAL 1 minute
# This timeout will trigger 60 seconds AFTER the 180-second timeout
# if no user activity occurs during the locked state.
timeout { # Use 'timeout' block for specific delay
    delay = 60 # 1 minute (60 seconds)
    # Command to run when this specific 60-second timeout has passed
    on-timeout = hyprctl dispatch dpms off
    # Command to run when activity is detected AFTER this specific timeout
    on-resume = hyprctl dispatch dpms on
}
